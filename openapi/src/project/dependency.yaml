paths:
  create:
    post:
      summary: Create Dependency
      description: Create a new project dependency record
      requestBody:
        description: The project dependency record to create
        content:
          application/json: &postContent
            schema:
              $ref: '../schemas/project_dependency.yaml'
            examples:
              record:
                $ref: '#/components/examples/record'
          application/msgpack:
            <<: *postContent
      tags: [Projects]
      responses:
        "200": {$ref: '#/components/responses/Success'}
        "400": {$ref: '../components/responses.yaml#/RequestError'}
        "409": {$ref: '../components/responses.yaml#/Conflict'}
      security: [{apiKey: []}, {session: []}]
    parameters:
      - name: id
        in: path
        description: The Project ID to add the dependency to
        required: true
        schema:
          type: string
          format: uuid

  manage:
    get:
      summary: Get Dependency
      description: Retrieve a project dependency record
      tags: [Projects]
      responses:
        "200": {$ref: '#/components/responses/Success'}
        "404": {$ref: '../components/responses.yaml#/NotFound'}
      security: [{apiKey: []}, {session: []}]
    delete:
      summary: Delete Dependency
      description: Remove a project dependency record
      tags: [Projects]
      responses:
        "204": {$ref: '../components/responses.yaml#/RecordRemoved'}
        "404": {$ref: '../components/responses.yaml#/NotFound'}
      security: [{apiKey: []}, {session: []}]
    parameters:
      - name: id
        in: path
        description: Project ID
        required: true
        schema:
          type: string
          format: uuid
      - name: dependency_id
        in: path
        description: The ID of the project that this project is dependent upon
        required: true
        schema:
          type: string
          format: uuid

components:
  examples:
    record:
      summary: A project dependency record
      value:
        project_id: 3e3a6e61-142b-4c47-96e2-3adb9723195e
        dependency_id: cc64115b-ffe5-49c1-be14-4ff8bb322daf

  responses:
    Success:
      description: The request to create, update, or retrieve the project was successful
      headers:
        Cache-Control: {$ref: '../components/headers.yaml#/Cache-Control'}
        Last-Modified: {$ref: '../components/headers.yaml#/Last-Modified'}
        Link: {$ref: '../components/headers.yaml#/Link'}
      content:
        application/json: &responsesSuccess
          schema:
            $ref: '../schemas/project_dependency.yaml'
          examples:
            record:
              $ref: '#/components/examples/record'
        application/msgpack:
          <<: *responsesSuccess
