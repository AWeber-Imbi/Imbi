paths:
  collection:
    get:
      description: Retrieve the collection of URLs for a project
      summary: Get URLs
      tags: [Projects]
      responses:
        '200':
          description: Success
          headers:
            Cache-Control: { $ref: '../components/headers.yaml#/Cache-Control' }
          content:
            application/json: &responseContent
              schema:
                type: array
                items:
                  $ref: '../schemas/project_URL.yaml#/read'
              examples:
                records:
                  summary: Multiple group records
                  value:
                    - project_id: 1
                      environment: Production
                      created_by: test_user
                      last_modified_by: ~
                      url: https://imbi.service.production.consul
                    - project_id: 1
                      environment: Staging
                      created_by: test_user
                      last_modified_by: ~
                      url: https://imbi.service.staging.consul
                    - project_id: 1
                      environment: Testing
                      created_by: test_user
                      last_modified_by: ~
                      url: https://imbi.service.testing.consul
            application/msgpack:
              <<: *responseContent
        '401': { $ref: '../components/responses.yaml#/Unauthorized' }
    post:
      summary: Create URL
      description: Create a new project URL record
      requestBody:
        description: The project URL record to create
        content:
          application/json: &postContent
            schema:
              $ref: '../schemas/project_url.yaml#/write'
            examples:
              record:
                $ref: '#/components/examples/record'
          application/msgpack:
            <<: *postContent
      tags: [Projects]
      responses:
        '200': { $ref: './project_url.yaml#/components/responses/Success' }
        '400': { $ref: '../components/responses.yaml#/RequestError' }
        '401': { $ref: '../components/responses.yaml#/Unauthorized' }
        '409': { $ref: '../components/responses.yaml#/Conflict' }
    parameters:
      - name: id
        in: path
        description: The Project ID
        required: true
        schema:
          type: number

components:
  examples:
    record:
      summary: A project URL record
      value:
        project_id: 1
        environment: Production
        url: https://imbi.service.produciton.consul
